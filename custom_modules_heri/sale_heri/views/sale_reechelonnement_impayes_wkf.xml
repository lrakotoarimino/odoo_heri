<?xml version="1.0" encoding="UTF-8"?>
<odoo>
	<data>
		<!-- workflow -->
		<record id="sale_reechelonnement_wkf" model="workflow">
			<field name="name">Rééchelonnement des impayés</field>
			<field name="osv">sale.order</field>
			<field name="on_create">True</field>
		</record>
		
		<!-- workflow activity-->
		<record id="act_etab_demande_reechelonnement" model="workflow.activity">
			<field name="wkf_id" ref="sale_reechelonnement_wkf"/>
			<field name="flow_start">True</field>
			<field name="name">Etablissement de reechelonnement</field>
			<field name="kind">function</field>
			<field name="action">action_etab_reechelonnement()</field>
		</record>
		
		<record id="activity_observation_finance" model="workflow.activity">
			<field name="wkf_id" ref="sale_reechelonnement_wkf"/>
			<field name="name">Attente de validation finance</field>
			<field name="kind">function</field>
			<field name="action">action_observation_finance()</field>
		</record>
		
		<record id="activity_validation_dg" model="workflow.activity">
			<field name="wkf_id" ref="sale_reechelonnement_wkf"/>
			<field name="name">Validation DG</field>
			<field name="kind">function</field>
			<field name="action">action_observation_dg()</field>
		</record>
		
		<record id="activity_generation_facture_reechelonnement" model="workflow.activity">
			<field name="wkf_id" ref="sale_reechelonnement_wkf"/>
			<field name="name">Generation facture reechelonnement</field>
			<field name="kind">function</field>
			<field name="action">generation_facture_reechelonnement()</field>
		</record>
		<!--End workflow activity-->
		
		<!-- workflow transition-->
		<record id="act_etab_demande_reechelonnement_to_activity_validation_finance" model="workflow.transition">
            <field name="act_from" ref="act_etab_demande_reechelonnement"/>
            <field name="act_to" ref="activity_observation_finance"/>
            <field name="signal">action_validation_call</field>
        </record>
        
        <record id="activity_observation_finance_to_activity_validation_dg" model="workflow.transition">
            <field name="act_from" ref="activity_observation_finance"/>
            <field name="act_to" ref="activity_validation_dg"/>
            <field name="signal">action_verif_dg</field>
        </record>      
        
        <record id="activity_observation_finance_to_activity_generation_facture_reechelonnement" model="workflow.transition">
            <field name="act_from" ref="activity_observation_finance"/>
            <field name="act_to" ref="activity_generation_facture_reechelonnement"/>
            <field name="signal">action_finance_ok</field>
        </record>
        
        <record id="activity_validation_dg_to_activity_generation_facture_reechelonnement" model="workflow.transition">
            <field name="act_from" ref="activity_validation_dg"/>
            <field name="act_to" ref="activity_generation_facture_reechelonnement"/>
            <field name="signal">action_validation_dg</field>
        </record>
        
        <record id="activity_observation_finance_to_act_etab_demande_reechelonnement" model="workflow.transition">
            <field name="act_from" ref="activity_observation_finance"/>
            <field name="act_to" ref="act_etab_demande_reechelonnement"/>
            <field name="signal">action_refus_finance</field>
        </record>
        
        <record id="activity_validation_dg_to_activity_observation_finance" model="workflow.transition">
            <field name="act_from" ref="activity_validation_dg"/>
            <field name="act_to" ref="activity_observation_finance"/>
            <field name="signal">action_annulation_dg</field>
        </record>      
		<!--End workflow transition-->
		<!--End workflow -->
	</data>
</odoo>